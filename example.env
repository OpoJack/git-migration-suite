# Git Migration Suite Configuration
# Copy this file to .env and configure for your environment

# =============================================================================
# SOURCE ENVIRONMENT (where you CREATE bundles)
# =============================================================================

# Directories to search for source repositories (comma-separated)
# The script will search each directory for repos listed in repos.txt
# Example: /c/repos or /home/user/repos
# Multiple directories: /c/repos,/c/other-repos,/d/more-repos
SOURCE_SEARCH_DIRS="/path/to/source_repos"

# =============================================================================
# DESTINATION ENVIRONMENT (where you APPLY bundles)
# =============================================================================

# Directories to search for destination repositories (comma-separated)
# The script will search each directory for a repo matching each bundle
# These should be the full paths to directories containing your repos
# Example: /repos/main-group/project,/repos/main-group/other-project
DEST_SEARCH_DIRS="/path/to/dest_repos/group/project"

# Directory where new repositories are initialized (used by init_repos.sh)
# This is where repos will be cloned when setting up for the first time
INIT_DEST_DIR="/path/to/dest_repos/new"

# GitLab remote configuration
# The script will configure/update the 'gitlab' remote in each repository
GITLAB_HOST="gitlab.example.com"
GITLAB_GROUP="my-group"

# GitLab credentials (used to construct remote URL)
# Option 1: Username + Personal Access Token (recommended)
GITLAB_USERNAME="your-username"
GITLAB_TOKEN="your-personal-access-token"

# Option 2: If using SSH instead of HTTPS, set this to "ssh" and configure
# your SSH keys separately. Leave GITLAB_TOKEN empty.
# GITLAB_AUTH_METHOD="https"
GITLAB_AUTH_METHOD="https"

# =============================================================================
# COMMON SETTINGS
# =============================================================================

# File containing list of repositories to process (relative to project root)
# One repository name per line, comments start with #
REPOS_LIST_FILE="repos.txt"

# Default branches to bundle (comma or space separated)
# These branches will be bundled if no -b flag is provided
DEFAULT_BRANCHES="main,develop"

# Directory to store generated bundles (absolute or relative to project root)
BUNDLE_OUTPUT_DIR="bundles"

# Directory where archives are placed for import (destination environment)
# This is where you should copy the .tar.gz.txt files from the source environment
# Defaults to project root if not set
ARCHIVE_INPUT_DIR=""

# How far back the script should look for commits when creating incremental bundles
# Use git date format: "1 month ago", "2 weeks ago", "30 days ago", etc.
BUNDLE_LOOKBACK="1 month ago"

# =============================================================================
# DOCKER IMAGE TRANSFER
# =============================================================================

# Source Harbor registry URL (without https://)
# Example: harbor.example.com
HARBOR_REGISTRY="harbor.example.com"

# Directory to store exported Docker images (absolute or relative to project root)
DOCKER_OUTPUT_DIR="images"

# GitLab Container Registry (destination for docker_upload.sh)
# Base registry URL (without https://)
GITLAB_REGISTRY="gitlab.example.com"

# Path to the umbrella repo that will contain all images
# Images will be pushed to: GITLAB_REGISTRY/GITLAB_REGISTRY_PATH/<image>:<tag>
GITLAB_REGISTRY_PATH="dev_group/project-group"

# Directory containing Docker image .tar.gz.txt files to import
# (absolute or relative to project root)
DOCKER_INPUT_DIR="images"